<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>

        #btn {
            position: absolute;
            left: 0;
            top: 0;
        }

        #angle {
            position: absolute;
            right: 200px;
            top: 200px;
            font-size: 30px;
        }
    </style>
</head>
<body>
    <canvas id="cnv"></canvas>
    <div id="angle"></div>
    <button id="btn">СТОП КРААААААААН</button>
    <input type="range" id="inputAngle" min="0" max="3.14" step="0.00000001">
    <script>





'use strict'
// function findFirstPoint(routes) {
//     let points = ...routes;
//     console.log(points)
//     // routes.forEach(e => {
        
//     // });
// }

// function findRoutes(routes) {

// }
let flag = 1;
let angleDiv = document.getElementById('angle');
let inputAngle = document.getElementById('inputAngle');

let cnv = document.getElementById('cnv');
let ctx = cnv.getContext('2d');
let w = cnv.width = window.innerWidth;
let h = cnv.height = window.innerHeight;

let angle = 0;
update();
inputAngle.addEventListener('input', (event) => {
    angle = +event.target.value;
    flag=0;
    update();
});

// let angle=0;

ctx.strokeStyle = '#000'
ctx.lineWidth = 1;

// let interval = setInterval(update, 15);

// tree(w/2,h/2+300,-Math.PI / 2, 400, );

// function update() {
//     // if(!flag) return
//     ctx.clearRect(0,0,w,h);
//     tree(w/2,h/2+300,-Math.PI / 2, 200, 17);
//     angleDiv.innerHTML = `Angle: ${Math.round(angle*180/Math.PI)}`;
//     angle += 0.01;
// }


// function tree(x,y,dir,l,iteration) {
//     let x1 = x + Math.cos(dir) * l;
//     let y1 = y + Math.sin(dir) * l;
//     ctx.beginPath();
//     ctx.moveTo(x,y);
//     ctx.lineTo(x1,y1);
//     ctx.stroke();
//     if(iteration > 0) {
//         // tree(x1,y1,dir, l*0.5, iteration - 1);
//         tree(x1,y1,dir + angle, l*0.7, iteration - 1);
//         tree(x1,y1,dir - angle, l*0.7, iteration - 1);
//     }
// }




// 3 дерева

let interval = setInterval(update, 15);


function update() {
    if(!flag) return
    ctx.clearRect(0,0,w,h);
    tree(w/2,h/2,-Math.PI/2 - angle/2, 300, 8);
    tree(w/2,h/2,2*Math.PI/3+0.5 - angle/2, 300, 8);
    tree(w/2,h/2,-Math.PI - 2*Math.PI/3 -0.5 - angle/2, 300, 8);
    angleDiv.innerHTML = `Angle: ${Math.round(angle*180/Math.PI)}`;
    angle += 0.01;
}


function tree(x,y,dir,l,iteration) {
    let x1 = x + Math.cos(dir) * l;
    let y1 = y + Math.sin(dir) * l;
    ctx.beginPath();
    ctx.moveTo(x,y);
    ctx.lineTo(x1,y1);
    ctx.stroke();
    if(iteration > 0) {
        // tree(x1,y1,dir + angle, l*0.5, iteration - 1);
        // tree(x1,y1,dir + angle + 2*Math.PI/3, l*0.5, iteration - 1);
        // tree(x1,y1,dir + angle - 2*Math.PI/3, l*0.5, iteration - 1);

        tree(x1,y1,dir + angle, l*0.5, iteration - 1);
        tree(x1,y1,dir + angle * 3, l*0.5, iteration - 1);
        tree(x1,y1,dir + angle * 2, l*0.5, iteration - 1);
    }
}



let btn = document.getElementById('btn')
btn.onclick = function(event) {
    flag = flag == 0 ? 1 : 0 ;
};


// // console.log(findRoutes([[1,2],[4,5],[2,3],[3,4]]))
// findFirstPoint([[1,2],[4,5],[2,3],[3,4]])
// // первая и последняя точка появляются только 1 раз


    </script>
</body>
</html>


